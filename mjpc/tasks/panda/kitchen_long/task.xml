<mujoco model="Panda">
  <include file="../../common.xml"/>

  <size memory="1M"/>

  <custom>
    <numeric name="agent_planner" data="0" />
    <numeric name="agent_horizon" data="0.5" />
    <numeric name="agent_timestep" data="0.009" />
    <numeric name="agent_policy_width" data="0.0035" />
    <numeric name="sampling_trajectories" data="60"/>
    <numeric name="sampling_spline_points" data="7" />
    <numeric name="sampling_exploration" data="0.1" />
    <numeric name="gradient_spline_points" data="6" />

  	<!-- <numeric name="residual_PinchForce" data="20 0 100"/> -->


	<!-- <numeric name="residual_select_FingerTouchObject" data="0"/>
	<text name="residual_list_FingerTouchObject" data="hand|box|target_position|cabinet_doorhandle_r|cabinet_doorhandle_l|kettle_handle|kettle_center|microwave_handle|microwave_center|slide_handle|knob1|knob2|knob3|knob4|red_switch|red_switch_handle|peach_plate|blue_plate|box_green|microbutton"/> -->

	<numeric name="residual_select_ReachObjectA" data="0"/>
	<text name="residual_list_ReachObjectA" data="hand|box|target_position|cabinet_doorhandle_r|cabinet_doorhandle_l|kettle_handle|kettle_center|microwave_handle|microwave_center|slide_handle|knob1|knob2|knob3|knob4|red_switch|red_switch_handle|peach_plate|blue_plate|box_green|microbutton"/>
	<numeric name="residual_select_ReachObjectB" data="0"/>
	<text name="residual_list_ReachObjectB" data="hand|box|target_position|cabinet_doorhandle_r|cabinet_doorhandle_l|kettle_handle|kettle_center|microwave_handle|microwave_center|slide_handle|knob1|knob2|knob3|knob4|red_switch|red_switch_handle|peach_plate|blue_plate|box_green|microbutton"/>

	<numeric name="residual_select_Reach2ObjectA" data="0"/>
	<text name="residual_list_Reach2ObjectA" data="hand|box|target_position|cabinet_doorhandle_r|cabinet_doorhandle_l|kettle_handle|kettle_center|microwave_handle|microwave_center|slide_handle|knob1|knob2|knob3|knob4|red_switch|red_switch_handle|peach_plate|blue_plate|box_green|microbutton"/>
	<numeric name="residual_select_Reach2ObjectB" data="0"/>
	<text name="residual_list_Reach2ObjectB" data="hand|box|target_position|cabinet_doorhandle_r|cabinet_doorhandle_l|kettle_handle|kettle_center|microwave_handle|microwave_center|slide_handle|knob1|knob2|knob3|knob4|red_switch|red_switch_handle|peach_plate|blue_plate|box_green|microbutton"/>


	<numeric name="residual_select_JointTarget" data="0"/>
	<text name="residual_list_JointTarget" data="leftdoorhinge|rightdoorhinge|knob1_joint|knob2_joint|knob3_joint|knob4_joint|lightswitch_joint|micro0joint|red_switch_handle_joint|microbutton_joint"/>
	<numeric name="residual_JointTargetAngle" data="1 0 1"/>

	<numeric name="residual_select_MoveAwayObjectA" data="0"/>
	<text name="residual_list_MoveAwayObjectA" data="hand|box|target_position|cabinet_doorhandle_r|cabinet_doorhandle_l|kettle_handle|kettle_center|microwave_handle|microwave_center|slide_handle|knob1|knob2|knob3|knob4|red_switch|red_switch_handle|peach_plate|blue_plate|box_green|microbutton"/>
	<numeric name="residual_select_MoveAwayObjectB" data="4"/>
	<text name="residual_list_MoveAwayObjectB" data="hand|box|target_position|cabinet_doorhandle_r|cabinet_doorhandle_l|kettle_handle|kettle_center|microwave_handle|microwave_center|slide_handle|knob1|knob2|knob3|knob4|red_switch|red_switch_handle|peach_plate|blue_plate|box_green|microbutton"/>
	<numeric name="residual_MoveAwayDistance" data="1.0 1 2"/>
  </custom>

  <statistic extent="1.5" center="0.1 0.2 0.3"/>

  <visual>
    <quality shadowsize="8192"/>
    <global azimuth="180" elevation="-30"/>
    <scale framelength=".3" framewidth=".03"/>
  </visual>

  <default>
    <geom solref=".001 1"/>
  </default>

  <compiler angle="radian" />
  <include file="../furniture_sim/oven/oven_asset.xml"/>
  <include file="../furniture_sim/counters/counters_asset.xml"/>
  <include file="../furniture_sim/backwall/backwall_asset.xml"/>
  <include file="../furniture_sim/slidecabinet/slidecabinet_asset.xml"/>
  <include file="../furniture_sim/hingecabinet/hingecabinet_asset.xml"/>
  <include file="../furniture_sim/microwave/microwave_asset.xml"/>
  <include file="../furniture_sim/kettle/kettle_asset.xml"/>

  <worldbody>
    <site name="world" xyaxes="-1 0 0 0  1 0"/>
    <light pos="0 -0.1 0.5" dir="0 0.2 -1" diffuse="0.7 0.7 0.7" specular="0.3 0.3 0.3"
        directional="true" castshadow="true"/>
    
    <!-- <camera pos="-1.581 -2.186 1.570" xyaxes="0.666 -0.746 0.000 0.333 0.297 0.895"/> -->
	<!-- <camera pos="-1.468 1.110 1.365" xyaxes="-0.622 -0.783 -0.000 0.249 -0.198 0.948"/> -->
	<!-- <camera pos="-1.585 -0.575 1.356" xyaxes="0.312 -0.950 -0.000 0.395 0.130 0.910"/> -->
	<!-- <camera pos="-0.507 -1.634 1.252" xyaxes="0.856 -0.517 0.000 0.207 0.343 0.916"/> -->
	<camera pos="-1.821 -2.011 1.214" xyaxes="0.691 -0.723 -0.000 0.219 0.209 0.953"/>


  <!-- <body name="kitchen" pos="0.4 0.2 -0.1" axisangle="0 0 1 -0.785398"> -->
  <body name="kitchen" pos="-0.1 0.0 0.0">
	<!-- <body pos="1.0 -0.7 -1.6" axisangle="0 0 1 -1.57079"> -->
	<!-- <body pos="0.6 1.0 -1.6"> -->
	<body pos="0.7 -0.7 -1.6" axisangle="0 0 1 -1.57079">
	  <body name="oven" pos="0 0 0">
	  	<include file="../furniture_sim/oven/oven_body.xml"/>
	  </body>
	  <body name="sink" pos="0 0 0">
	  	<include file="../furniture_sim/counters/sink_counter_body.xml"/>
	  </body>
	  <body name="island" pos="0 0 0">
	  	<include file="../furniture_sim/counters/box_counter_body.xml"/>
	  </body>
      <body name="backwall" pos="0 0 0">
	  	<include file="../furniture_sim/backwall/backwall_body.xml"/>
	  </body>
	   <body name="slidecabinet" pos="0.3 0.3 2.6" >
	  	<include file="../furniture_sim/slidecabinet/slidecabinet_body.xml"/>
	  </body>
      <body name="hingecabinet" pos="-0.604 0.3 2.6" >
	  	<include file="../furniture_sim/hingecabinet/hingecabinet_body.xml"/>
	  </body>
	  <!-- <body name="microwave" pos="-0.750 -0.025 1.6" euler="0 0 0.0"> -->
	  <body name="microwave" pos="-0.800 0.25 1.6" euler="0 0 0.0">
	  	<site name="microwave_center" type="box" pos="-0.2 0.0 0.02" size="0.01 0.01 0.01"/>
	  	<include file="../furniture_sim/microwave/microwave_body1.xml"/>
			      <body name="red_switch" pos="-0.60 -1.4 0.15" axisangle="0 0 1 1.57079">
                                <!--<body name="red_switch" pos="0.10 -0.5 0.0" quat="1 1 0 0">-->

                                <site name="red_switch" type="box" pos="0 0 0" size="0.0030 0.0030 0.0030"/>

                                <geom class="hinge_collision" type="box" pos="0 0.033 -0.12" size="0.080 0.010 0.040" mass=".3"/>
                                <geom material="kettle_red" pos="0 0.033 -0.12" size="0.081 0.011 0.041" type="box"/>

                                <geom class="hinge_collision" type="box" pos="0 -0.033 -0.12" size="0.080 0.010 0.040" mass=".3"/>
                                <geom material="kettle_red" pos="0 -0.033 -0.12" size="0.081 0.011 0.041" type="box"/>

                                <geom class="hinge_collision" type="box" pos="-0.07 0.0 -0.14" size="0.010 0.040 0.020" mass=".3"/>
                                <geom material="kettle_red" pos="-0.07 0.00 -0.14" size="0.011 0.041 0.021" type="box"/>

                                <geom class="hinge_collision" type="box" pos="0.07 0.0 -0.14" size="0.010 0.040 0.020" mass=".3"/>
                                <geom material="kettle_red" pos="0.07 0.00 -0.14" size="0.011 0.041 0.021" type="box"/>

                                <body name="red_switch_handle" pos="0 0 0.02">
                                        <joint type="hinge" name="red_switch_handle_joint" axis="0 1 0" pos="0 0 -0.13" frictionloss="1" range="-1.57 1.57"/>
                                        <geom class="hinge_collision" type="cylinder" size="0.010 0.130" mass=".3" condim="6" friction="1 .01 .003"/>
                                        <geom material="M_hinge_metal" pos="0 0 0" size="0.011 0.131" type="cylinder"/>

                                        <geom class="hinge_collision" type="cylinder" pos="0 0 0.1" size="0.020 0.040" mass=".3" condim="6" friction="1 .01 .003"/>
                                        <geom material="kettle_red" pos="0 0 0.1" size="0.021 0.041" type="cylinder"/>

                                        <site name="red_switch_handle" type="box" pos="0 0 0.075" size="0.0030 0.0030 0.0030"/>
                                </body>
                        </body>

	  </body>
    </body>


    
	<body name="target_position" pos="0.4 0.1 0.0005">
      <site name="target_position" type="box" pos="0 0 0" size="0.05 0.05 0.001"/>
    </body>
	    

    <body name="bin" pos="-0.6 -0.2 .001" >
      <geom class="hinge_collision" type="box" size="0.06 0.06 0.001" material="kettle_yellow" />
      <geom class="hinge_collision" pos="0.06 0 0.01" type="box" size="0.007 0.05 0.007" material="kettle_yellow"/>
      <geom class="hinge_collision" pos="-0.06 0 0.01" type="box" size="0.007 0.05 0.007" material="kettle_yellow"/>
      <geom class="hinge_collision" pos="0 -0.06 0.01" type="box" size="0.07 0.007 0.007" material="kettle_yellow"/>
      <geom class="hinge_collision" pos="0 0.06 0.01" type="box" size="0.07 0.007 0.007" material="kettle_yellow"/>

      <geom name="bottom" type="box" size="0.06 0.06 0.001" material="kettle_yellow" />
      <geom name="leftWall" pos="0.05 0 0.01" type="box" size="0.0071 0.0501 0.0171" material="kettle_yellow"/>
      <geom name="rightWall" pos="-0.05 0 0.01" type="box" size="0.0071 0.05 0.0171" material="kettle_yellow"/>
      <geom name="backWall" pos="0 -0.05 0.01" type="box" size="0.0701 0.0071 0.0171" material="kettle_yellow"/>
      <geom name="frontWall" pos="0 0.05 0.01" type="box" size="0.0701 0.0071 0.0171" material="kettle_yellow"/>

      <site name="peach_plate" type="box" pos="0 0 0.04" size="0.001 0.001 0.001"/>
    </body>

    <body name="bin_blue" pos="-0.6 0.0 .001" >
      <geom class="hinge_collision" type="box" size="0.06 0.06 0.001" material="kettle_blue" />
      <geom class="hinge_collision" pos="0.06 0 0.01" type="box" size="0.007 0.05 0.007" material="kettle_blue"/>
      <geom class="hinge_collision" pos="-0.06 0 0.01" type="box" size="0.007 0.05 0.007" material="kettle_blue"/>
      <geom class="hinge_collision" pos="0 -0.06 0.01" type="box" size="0.07 0.007 0.007" material="kettle_blue"/>
      <geom class="hinge_collision" pos="0 0.06 0.01" type="box" size="0.07 0.007 0.007" material="kettle_blue"/>

      <geom name="bottom_blue" type="box" size="0.06 0.06 0.001" material="kettle_blue" />
      <geom name="leftWall_blue" pos="0.05 0 0.01" type="box" size="0.0071 0.0501 0.0171" material="kettle_blue"/>
      <geom name="rightWall_blue" pos="-0.05 0 0.01" type="box" size="0.0071 0.05 0.0171" material="kettle_blue"/>
      <geom name="backWall_blue" pos="0 -0.05 0.01" type="box" size="0.0701 0.0071 0.0171" material="kettle_blue"/>
      <geom name="frontWall_blue" pos="0 0.05 0.01" type="box" size="0.0701 0.0071 0.0171" material="kettle_blue"/>

      <site name="blue_plate" type="box" pos="0 0 0.04" size="0.001 0.001 0.001"/>
    </body>

    </body> <!-- kitchen -->
    

    <body name="kettle" pos="0.68 -0.02 0.326" axisangle="0 0 1 1.57079">
	  <freejoint/>
	  <include file="../furniture_sim/kettle/kettle_body0.xml"/>
	  <site type="sphere" name="kettle_center" pos="0 0 0.15" size=".01"/>
    </body> 

    <body name="box" pos="0.80 0.15 0.95">
      <joint type="free"/>
      <geom class="kettle_collision" type="box" size="0.03 0.03 0.03" mass=".3"/>
	  <geom material="kettle_blue" pos="0 0 0" size="0.032 0.032 0.032" type="box"/>
      <site name="box" type="box" pos="0 0 0" size="0.03 0.03 0.03"/>
    </body>
    <body name="box_green" pos="-0.6 -0.2 0.001">
      <joint type="free"/>
      <geom class="kettle_collision" type="box" size="0.03 0.03 0.03" mass=".3"/>
	  <geom material="kettle_green" pos="0 0 0" size="0.032 0.032 0.032" type="box"/>
      <site name="box_green" type="box" pos="0 0 0" size="0.03 0.03 0.03"/>
    </body>


    <site name="pedestral" type="box" pos="0.45 0 0.1" size="0.001 0.001 0.001" group="4"/>
	
  </worldbody>

  <keyframe>
    <!-- <key name="home" qpos='2.45778e-05 2.9559e-07 2.45777e-05 2.95589e-07 2.45777e-05 2.95589e-07 2.45777e-05 2.95589e-07 2.16196e-05 5.08074e-06 0 4.85246e-200 0 0 4.29334e-19 0.38 -0.02 0.000996798 0.707109 1.14094e-07 -1.14095e-07 0.707105 0.8 0.15 0.850984 1 5.73314e-17 1.46823e-17 4.35108e-12 -0.6 -0.2 0.032984 1 8.36164e-17 -1.79173e-18 8.33995e-13 -2.87755 0.818801 2.89735 -2.7767 -0.197985 1.96293 0.95255 0.00650145 1.53193e-05 0.00652318 -0.00630414 0.00650144 1.5319e-05 0.00653797 -0.006334'/> -->
    <!-- <key qpos='2.45778e-05 2.9559e-07 2.45777e-05 2.95589e-07 2.45777e-05 2.95589e-07 2.45777e-05 2.95589e-07 2.16196e-05 5.08074e-06 0 9.90729e-84 -4.92651e-115 0 0 1.0143e-17 0.38 -0.02 0.000996798 0.707109 1.14094e-07 -1.14095e-07 0.707105 0.8 0.15 0.850984 1 5.90442e-17 1.71721e-17 4.35108e-12 -0.6 -0.2 0.032984 1 8.00285e-17 -1.78191e-18 8.33993e-13 2.88145 0.807452 -2.89732 -2.76237 0.229318 1.94812 0.639036 0.00650145 1.53193e-05 0.00652319 -0.00630415 0.00650145 1.5319e-05 0.00653797 -0.006334'/> -->
    <key qpos='2.45778e-05 2.9559e-07 2.45777e-05 2.95589e-07 2.45777e-05 2.95589e-07 2.45777e-05 2.95589e-07 2.16196e-05 5.08074e-06 0 1.81068e-38 0 0 0 -7.03035e-18 0.870037 0.137443 0.374993 -0.963731 2.30667e-05 8.83431e-05 0.266876 0.8 0.15 0.850984 1 6.0454e-17 -2.84455e-17 -1.76191e-12 -0.6 -0.2 0.0309969 1 1.5512e-17 1.89172e-17 3.9017e-19 -2.87394 0.863321 2.89524 -2.78758 -0.213073 1.9255 0.954168 0.00650196 1.53213e-05 0.0065237 -0.00630466 0.00650196 1.53208e-05 0.00653849 -0.00633452'/>
  </keyframe>

  <contact>
    <!-- <exclude body1="world" body2="left_finger"/>
    <exclude body1="world" body2="right_finger"/>
    <exclude body1="left_finger" body2="right_finger"/> -->
  </contact>

  <sensor>
	<!-- <user name="Finger Touch" dim="6" user="2 0 0 5 0.01"/>
	<user name="Pinch" dim="1" user="2 0 0 5 0.005"/> -->
	<!-- <user name="Reach" dim="3" user="2 0 0 5 0.1"/>
	<user name="Reach2" dim="3" user="2 0 0 5 0.1"/> -->
	<user name="Reach" dim="1" user="2 0 0 5 0.1"/>
	<user name="Reach2" dim="3" user="2 0 0 5 0.1"/>
	<user name="Joint Target" dim="1" user="2 0 0 1 0.003"/>
	<user name="Move Away" dim="1" user="2 1 0 5 0.01"/>
	<!-- <user name="Default Pose" dim="6" user="2 0 0 5 0.01"/>
	<user name="Default Pose No-Obstruction" dim="8" user="2 0 0 5 0.01"/> -->
    <framepos name="hand" objtype="site" objname="eeff"/>
	<!--
    <framepos name="trace0" objtype="site" objname="touch_left"/>
    <framepos name="trace1" objtype="site" objname="touch_right"/>
	-->
    <framepos name="box" objtype="site" objname="box"/>
    <framepos name="box_green" objtype="site" objname="box_green"/>
    <framepos name="target_position" objtype="site" objname="target_position"/>
	<framepos name="cabinet_doorhandle_r" objtype="site" objname="rightdoor_site"/>
	<framepos name="cabinet_doorhandle_l" objtype="site" objname="leftdoor_site"/>
	
	<framepos name="red_switch" objtype="site" objname="red_switch"/>
    <framepos name="red_switch_handle" objtype="site" objname="red_switch_handle"/>

	<framepos name="kettle_handle" objtype="site" objname="kettle_site0"/>
	<framepos name="kettle_center" objtype="site" objname="kettle_center"/>
	<framepos name="microwave_handle" objtype="site" objname="microhandle_site"/>
	<framepos name="microwave_center" objtype="site" objname="microwave_center"/>
	<framepos name="slide_handle" objtype="site" objname="slide_site"/>
	<framepos name="knob1" objtype="site" objname="knob1_site"/>
	<framepos name="knob2" objtype="site" objname="knob2_site"/>
	<framepos name="knob3" objtype="site" objname="knob3_site"/>
	<framepos name="knob4" objtype="site" objname="knob4_site"/>
	<framepos name="peach_plate" objtype="site" objname="peach_plate"/>
	<framepos name="blue_plate" objtype="site" objname="blue_plate"/>
	<framepos name='microbutton' objtype="site" objname= 'microbutton'/>
	<jointpos name='microbutton_joint' joint= 'microbutton_joint'/>

	<!-- <jointpos name='panda_joint0' joint= 'joint0'/> -->
	<jointpos name='panda_joint1' joint= 'joint1'/>
	<jointpos name='panda_joint2' joint= 'joint2'/>
	<jointpos name='panda_joint3' joint= 'joint3'/>
	<jointpos name='panda_joint4' joint= 'joint4'/>
	<jointpos name='panda_joint5' joint= 'joint5'/>
	<jointpos name='panda_joint6' joint= 'joint6'/>
	<jointpos name='panda_joint7' joint= 'joint7'/>

	<jointpos name='knob1_joint' joint= 'knob1_joint'/>
	<jointpos name='knob2_joint' joint= 'knob2_joint'/>
	<jointpos name='knob3_joint' joint= 'knob3_joint'/>
	<jointpos name='knob4_joint' joint= 'knob4_joint'/>
	<jointpos name='lightswitch_joint' joint= 'lightswitch_joint'/>
    <jointpos name="slidedoor_joint" joint="slidedoor_joint"/>
	<jointpos name='leftdoorhinge' joint= 'leftdoorhinge'/>
	<jointpos name='rightdoorhinge' joint= 'rightdoorhinge'/>

	<jointpos name='red_switch_handle_joint' joint= 'red_switch_handle_joint'/>

    <jointpos name="micro0joint" joint="micro0joint"/>
	<!-- <framepos name="leftfinger" objtype="site" objname="touch_left"/>
	<framepos name="rightfinger" objtype="site" objname="touch_right"/>
	<jointpos name="fingerjoint" joint='finger_joint1'/>
	<touch name="leftfingerforce" site="tip_left"/>
	<touch name="rightfingerforce" site="tip_right"/> -->
  </sensor>

  <include file="../panda_gripper.xml"/>
</mujoco>
